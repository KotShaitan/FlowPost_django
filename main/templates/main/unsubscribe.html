{% extends 'main/base.html' %}

{% block title %}–û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç {{ author.username }}{% endblock %}

{% block content %}
<div class="unsubscribe-container" style="max-width: 500px; margin: 100px auto; padding: 20px;">
    <div class="card" style="border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.1);">
        <div class="card-body" style="padding: 40px 30px; text-align: center;">
            <!-- –ò–∫–æ–Ω–∫–∞ -->
            <div style="font-size: 48px; color: #dc3545; margin-bottom: 20px;">üëã</div>
            
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <h2 style="color: #333; margin-bottom: 15px;">–û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç {{ author.username }}</h2>
            
            <!-- –°–æ–æ–±—â–µ–Ω–∏–µ -->
            <p style="color: #666; margin-bottom: 25px; line-height: 1.5;">
                –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç {{ author.username }}?
                –ü–æ—Å–ª–µ –æ—Ç–ø–∏—Å–∫–∏ –≤—ã –ø–æ—Ç–µ—Ä—è–µ—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–µ–º–∏—É–º-–∫–æ–Ω—Ç–µ–Ω—Ç—É –∞–≤—Ç–æ—Ä–∞.
            </p>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ -->
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 25px; border-left: 3px solid #dc3545;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color: #666;">–ü–ª–∞–Ω:</span>
                    <span style="color: #333; font-weight: 500;">{{ subscription.plan.name }}</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span style="color: #666;">–û–∫–æ–Ω—á–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏:</span>
                    <span style="color: #333; font-weight: 500;">{{ subscription.date_end|date:"d.m.Y" }}</span>
                </div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ -->
            <div style="display: flex; gap: 15px; justify-content: center;">
                <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø–∏—Å–∫–∏ -->
                <form method="post" action="{% url 'unsubscribe' author.id %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" 
                            class="btn btn-danger" 
                            style="padding: 12px 30px; font-weight: 500;">
                        –î–∞, –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è
                    </button>
                </form>
                
                <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã -->
                <a href="{% url 'profile' author.id %}" 
                   class="btn btn-outline-secondary" 
                   style="padding: 12px 30px; font-weight: 500;">
                    –ù–µ—Ç, –æ—Å—Ç–∞—Ç—å—Å—è
                </a>
            </div>
            
            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
                <p style="color: #999; font-size: 0.9rem; margin: 0;">
                    –í—ã —Å–º–æ–∂–µ—Ç–µ —Å–Ω–æ–≤–∞ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è
                </p>
            </div>
        </div>
    </div>
</div>

<!-- –ü—Ä–æ—Å—Ç–æ–π JavaScript –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
<script>
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    document.querySelector('form[action*="unsubscribe"]').addEventListener('submit', function(e) {
        if (!confirm('–¢–æ—á–Ω–æ –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç {{ author.username }}?')) {
            e.preventDefault();
        }
    });
</script>
{% endblock %}